<%- include('../partials/_navbar') %>
<link rel="stylesheet" href="/css/styles.css" />

<div class="form-container">
  <h1>Edit Recipe</h1>
  <form action="/recipes/<%= recipe._id %>?_method=PUT" method="POST" enctype="multipart/form-data"> <!-- Added enctype -->
    <label for="title">Recipe Title:</label>
    <input type="text" id="title" name="title" value="<%= recipe.title %>" required />

    <label for="ingredients">Ingredients (one per line):</label>
    <textarea id="ingredients" name="ingredients" rows="5" required><%= recipe.ingredients.join('\n') %></textarea>

    <label for="instructions">Instructions:</label>
    <textarea id="instructions" name="instructions" rows="5" required><%= recipe.instructions %></textarea>

    <!-- Display current image -->
    <% if (recipe.image) { %>
      <p>Current Image:</p>
      <img src="<%= recipe.image %>" alt="<%= recipe.title %>" style="max-width: 200px; border-radius: 5px;" />
    <% } %>

    <!-- File input for new image -->
    <label for="image">Replace Recipe Image:</label>
    <input type="file" id="image" name="image" accept="image/*" />

    <!-- Preserve current image if no new image is uploaded -->
    <input type="hidden" name="existingImage" value="<%= recipe.image %>" />

    <button type="submit">Update Recipe</button>
  </form>
</div>

<%- include('../partials/_footer') %>
